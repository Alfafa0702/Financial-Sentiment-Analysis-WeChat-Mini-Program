<view class="page">
  <view class="form-row">
    <text class="label">股票代码</text>
    <input class="input" placeholder="例如: 600036" value="{{stock}}" bindinput="onStockInput"/>
    <button class="btn btn-primary" bindtap="loadReports">筛选</button>
  </view>

  <view class="form-row">
    <text class="label">股票名称</text>
    <input class="input" placeholder="例如: 招商银行" value="{{stock_name}}" bindinput="onStockNameInput"/>
    <button class="btn btn-primary" bindtap="crawlReports">爬取并刷新</button>
  </view>

  <view class="reports">
    <block wx:if="{{loading}}">
      <text>加载中...</text>
    </block>

    <block wx:elif="{{reports.length}}">
      <block wx:for="{{reports}}" wx:for-item="r">
        <view class="report-item">
          <text class="title">{{r.report_title}}</text>
          <text class="meta">{{r.download_time}}</text>
          <button class="btn btn-download" data-url="{{r.report_url}}" bindtap="downloadReport">下载/查看</button>
        </view>
      </block>
    </block>

    <block wx:else>
      <text>暂无研报</text>
    </block>
  </view>
</view>